(this["webpackJsonptask-tracker-ts"]=this["webpackJsonptask-tracker-ts"]||[]).push([[0],{135:function(t,e,n){t.exports={todolist__name:"TodoList_todolist__name__2X1N4"}},160:function(t,e,n){},184:function(t,e,n){},292:function(t,e,n){"use strict";n.r(e);var a,i,c=n(0),o=n.n(c),r=n(10),s=n.n(r),d=(n(160),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,348)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),c(t),o(t)}))}),l=n(15),u=n(8),j=n(131),b=n.n(j).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"1e60f3eb-a2f7-4f18-b8e9-f6ea4b15f04b"}}),O=function(t){return b.post("/auth/login",t)},f=function(){return b.delete("/auth/login")},h=function(){return b.get("/auth/me")},p={status:"idle",error:null,isInicialized:!1},T=function(t){return{type:"app/SET_STATUS",status:t}},m=function(t){return{type:"app/SET_ERROR",error:t}},g=function(t,e){t.messages.length?e(m(t.messages[0])):e(m("Some error")),e(T("failed"))},I=function(t,e){e(m(t.message?t.message:"Some error")),e(T("failed"))},x={isLoggedIn:!1},v=function(t){return{type:"auth/SET_IS_LOGGED_IN",isLoggedIn:t}},k=n(20),L=n(37);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var S=function(){return b.get("/todo-lists")},C=function(t){return b.post("/todo-lists",{title:t})},_=function(t,e){return b.put("/todo-lists/".concat(t),{title:e})},y=function(t){return b.delete("/todo-lists/".concat(t))},E=function(t,e){return b.post("/todo-lists/".concat(t,"/tasks"),{title:e})},D=function(t){return b.get("/todo-lists/".concat(t,"/tasks"))},w=function(t,e,n){return b.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)},A=function(t,e){return b.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},N={},F=function(t,e,n){return function(a,i){var c=i().tasks[t].find((function(t){return t.id===e}));if(!c)throw new Error("task not found in state");var o=Object(u.a)({title:c.title,description:c.description,status:c.status,priority:c.priority,startDate:c.startDate,deadline:c.deadline},n);w(t,e,o).then((function(i){var c=i.data;0===c.resultCode?a(function(t,e,n){return{type:"UPDATE_TASK",todoListId:t,taskID:e,model:n}}(t,e,n)):g(c,a)})).catch((function(t){I(t,a)}))}},R=[],P=n(51),G=n(132),H=Object(P.c)({todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE_TODOLIST":return t.filter((function(t){return t.id!==e.todoListId}));case"ADD_TODOLIST":return[Object(u.a)(Object(u.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(k.a)(t));case"CHANGE_TODOLIST_TITLE":return t.map((function(t){return t.id===e.todoListId?Object(u.a)(Object(u.a)({},t),{},{title:e.newTodolistTitle}):t}));case"CHANGE_TODOLIST_FILTER":return t.map((function(t){return t.id===e.todoListId?Object(u.a)(Object(u.a)({},t),{},{filter:e.filter}):t}));case"SET_TODOLISTS":return e.todolists.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE_TODOLIST_ENTITY_STATUS":return t.map((function(t){return t.id===e.todoListId?Object(u.a)(Object(u.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(L.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskID}))));case"ADD_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(L.a)({},e.newTask.todoListId,[e.newTask].concat(Object(k.a)(t[e.newTask.todoListId]))));case"UPDATE_TASK":return Object(u.a)(Object(u.a)({},t),{},Object(L.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id!==e.taskID?t:Object(u.a)(Object(u.a)({},t),e.model)}))));case"ADD_TODOLIST":return Object(u.a)(Object(u.a)({},t),{},Object(L.a)({},e.todolist.id,[]));case"REMOVE_TODOLIST":var n=Object(u.a)({},t);return delete n[e.todoListId],n;case"SET_TODOLISTS":var a=Object(u.a)({},t);return e.todolists.forEach((function(t){a[t.id]=[]})),a;case"SET_TASKS":return Object(u.a)(Object(u.a)({},t),{},Object(L.a)({},e.todoListId,e.tasks));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"app/SET_STATUS":return Object(u.a)(Object(u.a)({},t),{},{status:e.status});case"app/SET_ERROR":return Object(u.a)(Object(u.a)({},t),{},{error:e.error});case"app/SET_IS_INICIALIZED":return Object(u.a)(Object(u.a)({},t),{},{isInicialized:e.isInicialized});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"auth/SET_IS_LOGGED_IN":return Object(u.a)(Object(u.a)({},t),{},{isLoggedIn:e.isLoggedIn});default:return t}}}),K=Object(P.d)(H,Object(P.a)(G.a));window.store=K;n(184);var M=n(326),U=n(329),z=n(330),V=n(331),q=n(134),B=n.n(q),W=n(2),J=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn}));return Object(W.jsx)("div",{children:Object(W.jsx)(M.a,{position:"static",children:Object(W.jsxs)(U.a,{children:[Object(W.jsx)(z.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(W.jsx)(B.a,{})}),e&&Object(W.jsx)(V.a,{onClick:function(){t((function(t){f().then((function(e){var n=e.data;0===n.resultCode?t(v(!1)):g(n,t)})).catch((function(e){I(e,t)}))}))},color:"inherit",children:"Log out"})]})})})},Y=n(339),Z=n(135),X=n.n(Z),Q=n(27),$=n(340),tt=n(332),et=function(t){console.log("AddItem render");var e=o.a.useState(null),n=Object(Q.a)(e,2),a=n[0],i=n[1],c=o.a.useState(""),r=Object(Q.a)(c,2),s=r[0],d=r[1],l=function(){s.trim()?(t.addItem(s.trim()),d("")):i("Field is required")};return Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)("div",{children:[Object(W.jsx)($.a,{disabled:t.disabled,variant:"outlined",type:"text",label:"Title",helperText:a,error:!!a,onChange:function(t){i(null),d(t.currentTarget.value)},onKeyPress:function(t){13===t.charCode&&l()},value:s}),Object(W.jsx)(z.a,{color:"primary",disabled:t.disabled,onClick:l,children:Object(W.jsx)(tt.a,{})})]})})},nt=o.a.memo(et),at=n(333),it=function(t){console.log("EditableSpan render");var e=o.a.useState(!1),n=Object(Q.a)(e,2),a=n[0],i=n[1],c=o.a.useState(""),r=Object(Q.a)(c,2),s=r[0],d=r[1];return Object(W.jsx)(W.Fragment,{children:a?Object(W.jsx)($.a,{type:"text",autoFocus:!0,onChange:function(t){d(t.currentTarget.value)},onBlur:function(){t.changeItemTitle(s),i(!1)},value:s}):Object(W.jsx)("span",{onDoubleClick:function(){i(!0),d(t.title)},children:t.title})})},ct=o.a.memo(it),ot=n(342),rt=function(t){var e=Object(c.useCallback)((function(e){t.changeTaskTitle(t.todoListId,t.task.id,e)}),[t.changeTaskTitle,t.todoListId,t.task.id]),n=Object(c.useCallback)((function(){t.removeTask(t.todoListId,t.task.id)}),[t.removeTask,t.todoListId,t.task.id]),i=Object(c.useCallback)((function(){t.changeTaskStatus(t.todoListId,t.task.id,t.task.status===a.Completed?a.New:a.Completed)}),[t.changeTaskStatus,t.todoListId,t.task.id,t.task.status]);return Object(W.jsxs)("div",{className:t.task.status===a.Completed?"is-done":"",children:[Object(W.jsx)(ot.a,{color:"primary",checked:t.task.status===a.Completed,onChange:i}),Object(W.jsx)(ct,{title:t.task.title,changeItemTitle:e}),Object(W.jsx)(z.a,{onClick:n,children:Object(W.jsx)(at.a,{})})]},t.task.id)},st=o.a.memo(rt),dt=function(t){var e=Object(l.b)();Object(c.useEffect)((function(){var n;e((n=t.todoListId,function(t){t(T("loading")),D(n).then((function(e){var a=e.data;t(function(t,e){return{type:"SET_TASKS",todoListId:t,tasks:e}}(n,a.items)),t(T("success"))}))}))}),[]);var n=Object(c.useCallback)((function(){t.removeTodolist(t.todoListId)}),[t.changeFilter,t.todoListId]),i=Object(c.useCallback)((function(){t.changeFilter("all",t.todoListId)}),[t.changeFilter,t.todoListId]),o=Object(c.useCallback)((function(){t.changeFilter("active",t.todoListId)}),[t.changeFilter,t.todoListId]),r=Object(c.useCallback)((function(){t.changeFilter("complited",t.todoListId)}),[t.changeFilter,t.todoListId]),s=Object(c.useCallback)((function(e){t.addTask(t.todoListId,e)}),[t.addTask,t.todoListId]),d=Object(c.useCallback)((function(e){t.changeTodolistTitle(t.todoListId,e)}),[t.todoListId]),u=t.tasks;return"active"===t.filter&&(u=u.filter((function(t){return t.status===a.New}))),"complited"===t.filter&&(u=u.filter((function(t){return t.status===a.Completed}))),Object(W.jsxs)("div",{className:X.a.todolist__block,children:[Object(W.jsx)(ct,{title:t.title,changeItemTitle:d}),Object(W.jsx)(z.a,{disabled:t.disabled,onClick:n,children:Object(W.jsx)(at.a,{})}),Object(W.jsx)(et,{disabled:t.disabled,addItem:s}),u.map((function(e){return Object(W.jsx)(st,{changeTaskTitle:t.changeTaskTitle,removeTask:t.removeTask,changeTaskStatus:t.changeTaskStatus,task:e,todoListId:t.todoListId},e.id)})),Object(W.jsxs)("div",{children:[Object(W.jsx)(V.a,{color:"default",variant:"all"===t.filter?"outlined":"text",onClick:i,children:"All"}),Object(W.jsx)(V.a,{color:"primary",variant:"active"===t.filter?"outlined":"text",onClick:o,children:"Active"}),Object(W.jsx)(V.a,{color:"secondary",variant:"complited"===t.filter?"outlined":"text",onClick:r,children:"Completed"})]})]})},lt=o.a.memo(dt),ut=n(334),jt=n(293),bt=n(16),Ot=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.todolists})),n=Object(l.c)((function(t){return t.tasks})),a=Object(l.c)((function(t){return t.auth.isLoggedIn}));Object(c.useEffect)((function(){a&&t((function(t){t(T("loading")),S().then((function(e){var n=e.data;t({type:"SET_TODOLISTS",todolists:n}),t(T("success"))}))}))}),[]);var i=Object(c.useCallback)((function(e,n){t(function(t,e){return function(n){A(t,e).then((function(a){var i=a.data;0===i.resultCode?n(function(t,e){return{type:"REMOVE_TASK",todoListId:t,taskID:e}}(t,e)):g(i,n)})).catch((function(t){I(t,n)}))}}(e,n))}),[t]),o=Object(c.useCallback)((function(e,n){t(function(t,e){return{type:"CHANGE_TODOLIST_FILTER",filter:t,todoListId:e}}(e,n))}),[t]),r=Object(c.useCallback)((function(e,n){t(function(t,e){return function(n){n(T("loading")),E(t,e).then((function(t){var e=t.data;0===e.resultCode?(n({type:"ADD_TASK",newTask:e.data.item}),n(T("success"))):g(e,n)})).catch((function(t){I(t,n)}))}}(e,n))}),[t]),s=Object(c.useCallback)((function(e,n,a){t(F(e,n,{status:a}))}),[t]),d=Object(c.useCallback)((function(e){t(function(t){return function(e){e(T("loading")),e(function(t,e){return{type:"CHANGE_TODOLIST_ENTITY_STATUS",todoListId:t,entityStatus:"loading"}}(t)),y(t).then((function(n){var a=n.data;0===a.resultCode?(e(function(t){return{type:"REMOVE_TODOLIST",todoListId:t}}(t)),e(T("success"))):g(a,e)})).catch((function(t){I(t,e)}))}}(e))}),[t]),u=Object(c.useCallback)((function(e){t(function(t){return function(e){e(T("loading")),C(t).then((function(t){var n=t.data;0===n.resultCode?(e({type:"ADD_TODOLIST",todolist:n.data.item}),e(T("success"))):g(n,e)})).catch((function(t){I(t,e)}))}}(e))}),[t]),j=Object(c.useCallback)((function(e,n,a){t(F(e,n,{title:a}))}),[t]),b=Object(c.useCallback)((function(e,n){t(function(t,e){return function(n){n(T("loading")),_(t,e).then((function(a){var i=a.data;0===i.resultCode?(n(function(t,e){return{type:"CHANGE_TODOLIST_TITLE",todoListId:t,newTodolistTitle:e}}(t,e)),n(T("success"))):g(i,n)})).catch((function(t){I(t,n)}))}}(e,n))}),[t]);return a?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ut.a,{container:!0,style:{padding:"20px 20px 20px 0"},children:Object(W.jsx)(nt,{addItem:u})}),Object(W.jsx)(ut.a,{container:!0,spacing:3,children:e.map((function(t){var e=n[t.id];return Object(W.jsx)(ut.a,{item:!0,children:Object(W.jsx)(jt.a,{style:{padding:"10px"},children:Object(W.jsx)(lt,{todoListId:t.id,disabled:"loading"===t.entityStatus,title:t.title,tasks:e,removeTask:i,changeFilter:o,changeTaskTitle:j,changeTodolistTitle:b,addTask:r,changeTaskStatus:s,filter:t.filter,removeTodolist:d})})},t.id)}))})]}):Object(W.jsx)(bt.a,{to:"/login"})},ft=n(344),ht=n(341);function pt(t){return Object(W.jsx)(ht.a,Object(u.a)({elevation:6,variant:"filled"},t))}var Tt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(m(null))},a=null!==e;return Object(W.jsx)("div",{children:Object(W.jsx)(ft.a,{open:a,autoHideDuration:6e3,onClose:n,children:Object(W.jsx)(pt,{severity:"error",onClose:n,children:e})})})},mt=n(335),gt=n(346),It=n(336),xt=Object(mt.a)((function(t){return Object(gt.a)({root:{width:"100%","& > * + *":{marginTop:t.spacing(2)}}})}));var vt=function(){var t=xt();return Object(W.jsx)("div",{className:t.root,children:Object(W.jsx)(It.a,{})})},kt=n(69),Lt=n(144),St=n(337),Ct=n(347),_t=n(78),yt={fontSize:"14px",color:"red",position:"absolute",bottom:"-18px",left:"0"},Et=function(t){var e=t.error;return Object(W.jsx)("div",{style:yt,children:e})},Dt=Object(mt.a)((function(t){return Object(gt.a)({root:{display:"flex",flexDirection:"column",width:"300px"},input:{width:"100%"},inputWrapper:{position:"relative",marginBottom:"20px"}})})),wt=_t.a({email:_t.b().email("Invalid email format").required("The field is required"),password:_t.b().required("The field is required").max(50,"Password should be less than 50 symbols")}),At=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn})),n=Object(Lt.a)({initialValues:{email:"free@samuraijs.com",password:"free",rememberMe:!1},onSubmit:function(e){var a;t((a=e,function(t){t(T("loading")),O(a).then((function(e){var n=e.data;0===n.resultCode?(t(v(!0)),t(T("success")),console.log(n)):g(n,t)})).catch((function(e){I(e,t)}))})),console.log(n.errors)},validationSchema:wt}),a=Dt();return e?Object(W.jsx)(bt.a,{to:"/"}):Object(W.jsx)("div",{children:Object(W.jsx)(ut.a,{container:!0,justify:"center",children:Object(W.jsx)("form",{onSubmit:n.handleSubmit,className:a.root,children:Object(W.jsxs)(St.a,{children:[Object(W.jsxs)("div",{className:a.inputWrapper,children:[Object(W.jsx)($.a,Object(u.a)({id:"standard-helperText",className:a.input,label:"Email"},n.getFieldProps("email"))),n.errors.email&&n.touched.email?Object(W.jsx)(Et,{error:n.errors.email}):null]}),Object(W.jsxs)("div",{className:a.inputWrapper,children:[Object(W.jsx)($.a,Object(u.a)({id:"standard-helperText",type:"password",className:a.input,label:"Password"},n.getFieldProps("password"))),n.errors.password&&n.touched.password?Object(W.jsx)(Et,{error:n.errors.password}):null]}),Object(W.jsx)(Ct.a,{label:"Remember me",control:Object(W.jsx)(ot.a,Object(u.a)({color:"primary"},n.getFieldProps("rememberMe")))}),Object(W.jsx)(V.a,{color:"primary",variant:"contained",type:"submit",children:"Login"})]})})})})},Nt=n(338),Ft=Object(mt.a)((function(t){return Object(gt.a)({root:{display:"flex",justifyContent:"center",marginTop:"38vh"},top:{color:"primary",animationDuration:"550ms"},circle:{strokeLinecap:"round"}})})),Rt=function(){var t=Ft();return Object(W.jsx)("div",{className:t.root,children:Object(W.jsx)(Nt.a,{variant:"indeterminate",disableShrink:!0,className:t.top,classes:{circle:t.circle},size:80,thickness:4})})},Pt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.status})),n=Object(l.c)((function(t){return t.app.isInicialized}));return Object(c.useEffect)((function(){t((function(t){h().then((function(e){var n=e.data;0===n.resultCode?t(v(!0)):g(n,t),t({type:"app/SET_IS_INICIALIZED",isInicialized:!0})})).catch((function(e){I(e,t)}))}))}),[]),n?Object(W.jsx)("div",{children:Object(W.jsxs)(kt.a,{children:[Object(W.jsx)(J,{}),"loading"===e&&Object(W.jsx)(vt,{}),Object(W.jsxs)(Y.a,{fixed:!0,children:[Object(W.jsx)(bt.b,{exact:!0,path:"/",render:function(){return Object(W.jsx)(Ot,{})}}),Object(W.jsx)(bt.b,{path:"/login",render:function(){return Object(W.jsx)(At,{})}})]}),Object(W.jsx)(Tt,{})]})}):Object(W.jsx)(Rt,{})};s.a.render(Object(W.jsx)(l.a,{store:K,children:Object(W.jsx)(Pt,{})}),document.getElementById("root")),d()}},[[292,1,2]]]);
//# sourceMappingURL=main.3a12c5bf.chunk.js.map